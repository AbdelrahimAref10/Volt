<div class="customers">
  <!-- Header -->
  <div class="customers__header">
    <div>
      <h1 class="customers__title">Customer Management</h1>
      <p class="customers__subtitle">Manage and monitor customer accounts</p>
    </div>
    <button
      type="button"
      (click)="onAddNew()"
      class="customers__add-btn"
      title="Add New Customer"
    >
      <svg class="customers__add-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
      </svg>
      Add Customer
    </button>
  </div>

  <!-- Success Message -->
  <div *ngIf="successMessage" class="customers__message customers__message--success">
    <svg class="customers__message-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <span>{{ successMessage }}</span>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="customers__message customers__message--error">
    <svg class="customers__message-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <span>{{ errorMessage }}</span>
  </div>

  <!-- Stats Cards -->
  <div class="customers__stats">
    <div class="customers__stat-card">
      <div class="customers__stat-value">{{ totalCount }}</div>
      <div class="customers__stat-label">Total Customers</div>
    </div>
    <div class="customers__stat-card customers__stat-card--active">
      <div class="customers__stat-value">{{ activeCustomersCount }}</div>
      <div class="customers__stat-label">Active</div>
    </div>
    <div class="customers__stat-card customers__stat-card--inactive">
      <div class="customers__stat-value">{{ inactiveCustomersCount }}</div>
      <div class="customers__stat-label">Inactive</div>
    </div>
    <div class="customers__stat-card customers__stat-card--blocked">
      <div class="customers__stat-value">{{ blockedCustomersCount }}</div>
      <div class="customers__stat-label">Blocked</div>
    </div>
  </div>

  <!-- Text Search Input -->
  <div class="customers__text-search">
    <div class="customers__search">
      <svg class="customers__search-icon-left" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onSearchTermChange()"
        placeholder="Search by name, mobile number, or email..."
        class="customers__search-input"
      />
    </div>
  </div>

  <!-- Advanced Search Box -->
  <div class="customers__search-box">
    <div class="customers__search-box-header">
      <div class="customers__search-box-title">
        <svg class="customers__search-box-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        <h3 class="customers__search-box-title-text">Advanced Search</h3>
      </div>
      <button
        type="button"
        (click)="onClearSearch()"
        class="customers__search-box-clear"
        *ngIf="hasActiveFilters()"
        title="Clear all filters"
      >
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
        Clear
      </button>
    </div>
    <div class="customers__search-box-content">
      <div class="customers__search-box-grid">
        <!-- State Filter -->
        <div class="customers__search-box-field">
          <label class="customers__search-box-label">
            <svg class="customers__search-box-label-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            Status
          </label>
          <select
            [(ngModel)]="searchFilters.state"
            class="customers__search-box-select"
          >
            <option *ngFor="let state of customerStates" [value]="state.value === null ? null : state.value">
              {{ state.label }}
            </option>
          </select>
        </div>

        <!-- Customer Type Filter -->
        <div class="customers__search-box-field">
          <label class="customers__search-box-label">
            <svg class="customers__search-box-label-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
            </svg>
            Customer Type
          </label>
          <select
            [(ngModel)]="searchFilters.customerType"
            class="customers__search-box-select"
          >
            <option [value]="null">All Types</option>
            <option *ngFor="let option of registerAsOptions" [value]="option.value">
              {{ option.label }}
            </option>
          </select>
        </div>

        <!-- City Filter -->
        <div class="customers__search-box-field">
          <label class="customers__search-box-label">
            <svg class="customers__search-box-label-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243m8.244-8.243a6 6 0 00-8.485-8.485l-4.243 4.243a6 6 0 108.485 8.485z" />
            </svg>
            City
          </label>
          <select
            [(ngModel)]="searchFilters.cityId"
            class="customers__search-box-select"
            [disabled]="isLoadingCities"
          >
            <option [value]="null">All Cities</option>
            <option *ngFor="let city of cities" [value]="city.cityId">
              {{ city.name }}
            </option>
          </select>
        </div>
      </div>
      <div class="customers__search-box-actions">
        <button
          type="button"
          (click)="onAdvancedSearch()"
          class="customers__search-box-btn customers__search-box-btn--primary"
          [disabled]="isLoading"
        >
          <svg class="customers__search-box-btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
          Search
        </button>
      </div>
    </div>
  </div>

  <!-- Customers Table -->
  <div class="customers__table-wrapper">
    <table class="customers__table">
      <thead>
        <tr>
          <th>Customer</th>
          <th>Contact</th>
          <th>Details</th>
          <th>Status</th>
          <th>Cash Payment</th>
          <th>Created</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <!-- Loading State (inside tbody) -->
        <tr *ngIf="isLoading" class="customers__table-loading-row">
          <td colspan="7" class="customers__table-loading-cell">
            <div class="customers__table-loading">
              <div class="customers__spinner"></div>
              <p>Loading customers...</p>
            </div>
          </td>
        </tr>
        <!-- Table Rows -->
        <ng-container *ngIf="!isLoading && customers.length > 0">
          <tr *ngFor="let customer of customers" class="customers__table-row">
            <td>
            <div class="customers__customer-info">
              <div *ngIf="customer.personalImage" class="customers__avatar">
                <img [src]="customer.personalImage" [alt]="customer.fullName" />
              </div>
              <div *ngIf="!customer.personalImage" class="customers__avatar customers__avatar--placeholder">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
              </div>
              <div class="customers__customer-details">
                <div class="customers__name">{{ customer.fullName }}</div>
                <div class="customers__meta">{{ customer.gender }} â€¢ {{ customer.registerAs === 0 ? 'Individual' : 'Institution' }}</div>
              </div>
            </div>
          </td>
          <td>
            <div class="customers__contact">
              <div class="customers__contact-item">
                <svg class="customers__contact-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
                <span>{{ customer.mobileNumber }}</span>
              </div>
              <div *ngIf="customer.email" class="customers__contact-item">
                <svg class="customers__contact-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
                <span>{{ customer.email }}</span>
              </div>
            </div>
          </td>
          <td>
            <div class="customers__details">
              <div class="customers__detail-item">
                <span class="customers__detail-label">City:</span>
                <span class="customers__detail-value">{{ customer.cityName || 'N/A' }}</span>
              </div>
              <div class="customers__detail-item">
                <span class="customers__detail-label">Verification:</span>
                <span class="customers__detail-value">{{ customer.verificationBy === 0 ? 'Phone' : 'Email' }}</span>
              </div>
            </div>
          </td>
          <td>
            <span [class]="'customers__state ' + getStateClass(customer.state)">
              {{ getStateLabel(customer.state) }}
            </span>
          </td>
          <td>
            <span [class]="'customers__cash-block ' + getCashBlockClass(customer.cashBlock)">
              <svg *ngIf="!customer.cashBlock" class="customers__cash-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <svg *ngIf="customer.cashBlock" class="customers__cash-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" />
              </svg>
              {{ getCashBlockLabel(customer.cashBlock) }}
            </span>
          </td>
          <td>
            <div class="customers__date">{{ customer.createdDate | date : "MMM d, y" }}</div>
            <div class="customers__time">{{ customer.createdDate | date : "h:mm a" }}</div>
          </td>
          <td>
            <button
              type="button"
              (click)="onView(customer.customerId)"
              class="customers__view-btn"
              title="View Customer Details"
            >
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
              </svg>
              View
            </button>
          </td>
          </tr>
        </ng-container>
        <!-- Empty State (inside tbody) -->
        <tr *ngIf="!isLoading && customers.length === 0" class="customers__table-empty-row">
          <td colspan="7" class="customers__table-empty-cell">
            <div class="customers__empty">
              <svg class="customers__empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
              </svg>
              <p class="customers__empty-text">No customers found</p>
              <p class="customers__empty-subtext">Try adjusting your search or filters</p>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div *ngIf="!isLoading && totalPages > 1" class="customers__pagination">
    <button
      type="button"
      (click)="onPageChange(currentPage - 1)"
      [disabled]="currentPage === 1"
      class="customers__pagination-btn"
      [class.customers__pagination-btn--disabled]="currentPage === 1"
    >
      <svg class="customers__pagination-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      Previous
    </button>

    <div class="customers__pagination-numbers">
      <button
        *ngFor="let page of getPageNumbers()"
        type="button"
        (click)="onPageChange(page)"
        class="customers__pagination-number"
        [class.customers__pagination-number--active]="page === currentPage"
      >
        {{ page }}
      </button>
    </div>

    <button
      type="button"
      (click)="onPageChange(currentPage + 1)"
      [disabled]="currentPage === totalPages"
      class="customers__pagination-btn"
      [class.customers__pagination-btn--disabled]="currentPage === totalPages"
    >
      Next
      <svg class="customers__pagination-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>
  </div>
</div>

<!-- Add Customer Modal -->
<div *ngIf="showModal" class="customers__modal-overlay" (click)="onCloseModal()">
  <div class="customers__modal" (click)="$event.stopPropagation()">
    <div class="customers__modal-header">
      <div>
        <h2 class="customers__modal-title">Create New Customer</h2>
        <p class="customers__modal-subtitle">Fill in the customer information below</p>
      </div>
      <button type="button" (click)="onCloseModal()" class="customers__modal-close">
        <svg class="customers__modal-close-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <form [formGroup]="customerForm" (ngSubmit)="onSubmit()" class="customers__modal-form">
      <div class="customers__form-grid">
        <!-- Mobile Number -->
        <div class="customers__form-group">
          <label class="customers__form-label">
            <span>Mobile Number</span>
            <span class="customers__form-required">*</span>
          </label>
          <input
            type="text"
            formControlName="mobileNumber"
            class="customers__form-input"
            [class.customers__form-input--error]="customerForm.get('mobileNumber')?.invalid && customerForm.get('mobileNumber')?.touched"
            placeholder="Enter mobile number"
          />
          <div *ngIf="customerForm.get('mobileNumber')?.invalid && customerForm.get('mobileNumber')?.touched" class="customers__form-error">
            <svg class="customers__error-icon-small" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            Mobile number is required and must contain only numbers
          </div>
        </div>

        <!-- Full Name -->
        <div class="customers__form-group">
          <label class="customers__form-label">
            <span>Full Name</span>
            <span class="customers__form-required">*</span>
          </label>
          <input
            type="text"
            formControlName="fullName"
            class="customers__form-input"
            [class.customers__form-input--error]="customerForm.get('fullName')?.invalid && customerForm.get('fullName')?.touched"
            placeholder="Enter full name"
          />
          <div *ngIf="customerForm.get('fullName')?.invalid && customerForm.get('fullName')?.touched" class="customers__form-error">
            <svg class="customers__error-icon-small" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            Full name is required and must be at least 2 characters
          </div>
        </div>

        <!-- Gender -->
        <div class="customers__form-group">
          <label class="customers__form-label">
            <span>Gender</span>
            <span class="customers__form-required">*</span>
          </label>
          <select
            formControlName="gender"
            class="customers__form-select"
            [class.customers__form-input--error]="customerForm.get('gender')?.invalid && customerForm.get('gender')?.touched"
          >
            <option value="">Select gender</option>
            <option *ngFor="let gender of genders" [value]="gender.value">{{ gender.label }}</option>
          </select>
          <div *ngIf="customerForm.get('gender')?.invalid && customerForm.get('gender')?.touched" class="customers__form-error">
            <svg class="customers__error-icon-small" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            Gender is required
          </div>
        </div>

        <!-- City -->
        <div class="customers__form-group">
          <label class="customers__form-label">
            <span>City</span>
            <span class="customers__form-required">*</span>
          </label>
          <select
            formControlName="cityId"
            class="customers__form-select"
            [class.customers__form-input--error]="customerForm.get('cityId')?.invalid && customerForm.get('cityId')?.touched"
            [disabled]="isLoadingCities"
          >
            <option [value]="0">Select city</option>
            <option *ngFor="let city of cities" [value]="city.cityId">{{ city.name }}</option>
          </select>
          <div *ngIf="customerForm.get('cityId')?.invalid && customerForm.get('cityId')?.touched" class="customers__form-error">
            <svg class="customers__error-icon-small" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            City is required
          </div>
        </div>

        <!-- Register As -->
        <div class="customers__form-group">
          <label class="customers__form-label">
            <span>Register As</span>
            <span class="customers__form-required">*</span>
          </label>
          <select formControlName="registerAs" class="customers__form-select">
            <option *ngFor="let option of registerAsOptions" [value]="option.value">{{ option.label }}</option>
          </select>
        </div>

        <!-- Verification By -->
        <div class="customers__form-group">
          <label class="customers__form-label">
            <span>Verification By</span>
            <span class="customers__form-required">*</span>
          </label>
          <select formControlName="verificationBy" class="customers__form-select">
            <option *ngFor="let option of verificationByOptions" [value]="option.value">{{ option.label }}</option>
          </select>
        </div>
      </div>

      <!-- Email -->
      <div class="customers__form-group">
        <label class="customers__form-label">
          <span>Email</span>
          <span *ngIf="customerForm.get('verificationBy')?.value === 1" class="customers__form-required">*</span>
        </label>
        <input
          type="email"
          formControlName="email"
          class="customers__form-input"
          [class.customers__form-input--error]="customerForm.get('email')?.invalid && customerForm.get('email')?.touched"
          placeholder="Enter email address (required if verification by email)"
        />
        <div *ngIf="customerForm.get('email')?.invalid && customerForm.get('email')?.touched" class="customers__form-error">
          <svg class="customers__error-icon-small" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Valid email is required when verification is by email
        </div>
      </div>

      <!-- Personal Image -->
      <div class="customers__form-group">
        <label class="customers__form-label">
          <span>Personal Image</span>
        </label>
        <div class="customers__image-upload">
          <input
            type="file"
            accept="image/*"
            (change)="onImageSelected($event)"
            class="customers__file-input"
            id="imageUpload"
          />
          <label for="imageUpload" class="customers__file-label">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            <span>{{ imagePreview ? 'Change Image' : 'Upload Image' }}</span>
          </label>
          <div *ngIf="imagePreview" class="customers__image-preview">
            <img [src]="imagePreview" alt="Preview" />
            <button type="button" (click)="selectedImage = null; imagePreview = null" class="customers__image-remove">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Commercial Register Image -->
      <div class="customers__form-group">
        <label class="customers__form-label">
          <span>Commercial Register Image</span>
          <span *ngIf="customerForm.get('registerAs')?.value === 1" class="customers__form-required">*</span>
        </label>
        <div class="customers__image-upload">
          <input
            type="file"
            accept="image/*"
            (change)="onCommercialImageSelected($event)"
            class="customers__file-input"
            [class.customers__file-input--error]="showCommercialImageError"
            id="commercialImageUpload"
          />
          <label for="commercialImageUpload" class="customers__file-label">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            <span>{{ commercialImagePreview ? 'Change Image' : 'Upload Commercial Register Image' }}</span>
          </label>
          <div *ngIf="commercialImagePreview" class="customers__image-preview">
            <img [src]="commercialImagePreview" alt="Commercial Register Preview" />
            <button type="button" (click)="selectedCommercialImage = null; commercialImagePreview = null" class="customers__image-remove">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
        </div>
        <div *ngIf="showCommercialImageError" class="customers__form-error">
          <svg class="customers__error-icon-small" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Commercial Register Image is required when registering as an Institution
        </div>
        <div *ngIf="customerForm.get('registerAs')?.value === 0" class="customers__form-hint">
          <svg class="customers__hint-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Not required for Individual customers
        </div>
      </div>

      <!-- Password -->
      <div class="customers__form-group">
        <label class="customers__form-label">
          <span>Password</span>
          <span class="customers__form-required">*</span>
        </label>
        <input
          type="password"
          formControlName="password"
          class="customers__form-input"
          [class.customers__form-input--error]="customerForm.get('password')?.invalid && customerForm.get('password')?.touched"
          placeholder="Enter password (min 6 characters)"
        />
        <div *ngIf="customerForm.get('password')?.invalid && customerForm.get('password')?.touched" class="customers__form-error">
          <svg class="customers__error-icon-small" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Password is required and must be at least 6 characters
        </div>
      </div>

      <!-- Form Actions -->
      <div class="customers__modal-actions">
        <button
          type="button"
          (click)="onCloseModal()"
          class="customers__modal-btn customers__modal-btn--cancel"
          [disabled]="isSubmitting"
        >
          Cancel
        </button>
        <button
          type="submit"
          [disabled]="customerForm.invalid || isSubmitting"
          class="customers__modal-btn customers__modal-btn--submit"
        >
          <span *ngIf="!isSubmitting">Create Customer</span>
          <span *ngIf="isSubmitting">Creating...</span>
        </button>
      </div>
    </form>
  </div>
</div>
